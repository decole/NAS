# Yii2-pet-project

Реализовано:
- (заморожен) VK бот
- (готово) Граббер погоды с AccuWeather
- (готово, заморожен) Форма, которая сохраняет Имя / email / phone
- (готовоб используется) Телеграм бот
- (готово,заморожен) Arduino сбор данных (Arduino Nano + ESP8266) по HTTP/JSON
- (готово, используется) Mqtt система взаимодействующая с Arduino + NodeMCU(ESP8266)

Для Ардуино - контроллеров передача данных реализована как 
API контроллер взаимодействия

#### Есть консольная команда:
в корневой директории пишешь `$ php yii <command>` 
- `weather/index` - парсинг погоды, настроить вызов через crone каждый час
- `weather/recuperate` 
- `weather/redb`- оптимизация базы данных, скрипт оставляет только уникальные данные в $dateTo - нужно поменять дату, от которой пляшет скрипт

                                                                                    		
- `back-up/mqtt` - сохранение БД в папку backup
- `hello/date` - показывает дату и время в yii2 и системе 
- `hello/list-cache` - показывает текущий memcache по зарегистрированным топикам mqtt в модели Mqtt
- `mqtt` - запуск прослушивания mqtt протокола, запускается через supervisord. Используется Mosquitto-broker. 
- `mqtt/post` - отправка данных. `mqtt/post <topic> <message>`
- `mqtt/trashbox` - оптимизирует БД, оставляет только уникальные данные.
- `mqtt/delete-old-data` - удаляет все данные, старше 2х месяцев. Весь третий месяц. 
- `tele-bot/index` - запуск через supervisord. Запуск телеграм бота. 
- `telegram/index` - отправка главному пользователю данные о дне и о погоде. 
- `telegram/send` - отправка главному пользователю сообщение через telegram. 

### Добавил RBAC для разгранечения прав пользователей.
Хотя пользователь только я один.
Нужно доработать систему верификации и авторизации. 
